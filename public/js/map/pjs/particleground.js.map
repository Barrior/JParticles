{"version":3,"sources":["pjs/particleground.js"],"names":["factory","define","amd","module","exports","pInt","s","parseInt","randomColor","random","toString","slice","limitRandom","max","min","extend","value","attr","arg","arguments","target","deep","length","i","typeChecking","obj","type","Object","prototype","call","isElem","nodeType","getCss","elem","val","win","getComputedStyle","getCssReg","test","offset","left","offsetLeft","top","offsetTop","offsetParent","on","evtName","handler","addEventListener","off","removeEventListener","createColor","setColor","colorLength","Array","color","floor","createCanvas","selector","context","canvasSupport","container","doc","querySelector","Error","c","createElement","cw","width","ch","height","cxt","getContext","paused","innerHTML","appendChild","pause","fn","open","draw","resize","set","oldCW","oldCH","scaleX","scaleY","dots","forEach","v","x","y","window","document","Math","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","Particleground","version","util","inherit","this","bind","event"],"mappings":"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","file":"pjs/particleground.js","sourcesContent":["/**\r\n * Particleground.js v1.0.0 (https://github.com/Barrior/Particleground.js)\r\n * Copyright 2016 Barrior <Barrior@qq.com>\r\n * Licensed under the MIT (https://opensource.org/licenses/mit-license.php)\r\n */\r\n(function ( factory ){\r\n    if ( typeof define === 'function' && define.amd ) {\r\n        // AMD. Register as an anonymous module.\r\n        define( [], factory );\r\n\r\n    } else if ( typeof module === 'object' && module.exports ) {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser\r\n        factory();\r\n    }\r\n}(function (){\r\n\t'use strict';\r\n\r\n\tvar win = window,\r\n        doc = document,\r\n\t\trandom = Math.random,\r\n        floor = Math.floor,\r\n        canvasSupport = !!doc.createElement('canvas').getContext;\r\n\r\n    //public\r\n\tfunction pInt( s ){\r\n\t\treturn parseInt( s, 10 );\r\n\t}\r\n\tfunction randomColor(){\r\n\t\t//http://stackoverflow.com/questions/1484506/random-color-generator-in-javascript\r\n\t\treturn \"#\" + random().toString( 16 ).slice( -6 );\r\n\t}\r\n\tfunction limitRandom( max, min ){\r\n\t\treturn random() * (max - min) + min;\r\n\t}\r\n    function extend(){\r\n        //站在jQuery的肩膀之上\r\n        var arg = arguments,\r\n            target = arg[0] || {},\r\n            deep = false,\r\n            length = arg.length,\r\n            i = 1,\r\n            value, attr;\r\n\r\n        if( typeof target === 'boolean' ){\r\n            deep = target;\r\n            target = arg[1] || {};\r\n            i++;\r\n        }\r\n\r\n        for( ; i < length; i++ ){\r\n            for( attr in arg[i] ){\r\n\r\n                value = arg[i][attr];\r\n\r\n                if( deep && (typeChecking( value, '[object Object]' ) ||\r\n                    typeChecking( value, '[object Array]' )) ){\r\n\r\n                    target[attr] =\r\n                        extend( deep, typeChecking(value, '[object Array]') ? [] : {}, value );\r\n\r\n                }else{\r\n                    target[attr] = value;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return target;\r\n    }\r\n    function typeChecking( obj, type ){\r\n        return Object.prototype.toString.call( obj ) === type;\r\n    }\r\n    function isElem( arg ){\r\n        return arg && typeof arg === 'object' &&\r\n            (arg.nodeType === 1 || arg.nodeType === 9);\r\n    }\r\n\r\n    //about element\r\n    var getCssReg = /^\\d+(\\.\\d+)?[a-z]+$/i;\r\n    function getCss( elem, attr ){\r\n        var val = win.getComputedStyle( elem )[ attr ];\r\n        return getCssReg.test( val ) ? pInt( val ) : val;\r\n    }\r\n    function offset( elem ){\r\n        var left = elem.offsetLeft || 0;\r\n        var top  = elem.offsetTop || 0;\r\n        while ( elem = elem.offsetParent ){\r\n            left += elem.offsetLeft;\r\n            top += elem.offsetTop;\r\n        }\r\n        return {\r\n            left: left,\r\n            top: top\r\n        };\r\n    }\r\n    function on( elem, evtName, handler ){\r\n        elem.addEventListener( evtName, handler );\r\n    }\r\n    function off( elem, evtName, handler ){\r\n        elem.removeEventListener( evtName, handler );\r\n    }\r\n\r\n    //about instance objects\r\n    function createColor( setColor ){\r\n        var colorLength = setColor instanceof Array ? setColor.length : false;\r\n        var color = function(){\r\n            return setColor[ floor( random() * colorLength ) ];\r\n        };\r\n        return colorLength ? color : randomColor;\r\n    }\r\n\tfunction createCanvas( selector, context ){\r\n        if( !canvasSupport ){\r\n            return false;\r\n        }\r\n        if( isElem( selector ) ){\r\n            context.container = selector;\r\n        }else if( !(context.container = doc.querySelector( selector )) ){\r\n            throw new Error( selector + ' is not defined' );\r\n        }\r\n        context.c = doc.createElement( 'canvas' );\r\n\t\tcontext.cw = context.c.width = getCss( context.container, 'width' );\r\n\t\tcontext.ch = context.c.height = getCss( context.container, 'height' );\r\n\t\tcontext.cxt = context.c.getContext( '2d' );\r\n        context.paused = false;\r\n\r\n        context.container.innerHTML = '';\r\n        return !!context.container.appendChild( context.c );\r\n    }\r\n\tfunction pause( context, fn ){\r\n\t\tif( canvasSupport && !context.paused ){\r\n\t\t\tcontext.paused = true;\r\n\t\t\tfn && fn.call( context );\r\n\t\t}\r\n\t}\r\n\tfunction open( context, fn ){\r\n\t\tif( canvasSupport && context.paused ){\r\n\t\t\tfn && fn.call( context );\r\n\t\t\tcontext.paused = false;\r\n\t\t\tcontext.draw();\r\n\t\t}\r\n\t}\r\n    function resize( context, fn ){\r\n        if( context.set.resize ){\r\n            on( win, 'resize', function(){\r\n                var oldCW = context.cw;\r\n                var oldCH = context.ch;\r\n\r\n                context.cw = context.c.width = getCss( context.container, 'width' );\r\n                context.ch = context.c.height = getCss( context.container, 'height' );\r\n\r\n                var scaleX = context.cw / oldCW;\r\n                var scaleY = context.ch / oldCH;\r\n\r\n                context.dots.forEach(function( v ){\r\n                    v.x *= scaleX;\r\n                    v.y *= scaleY;\r\n                });\r\n\r\n                fn && fn.call( context, scaleX, scaleY );\r\n\r\n                context.paused && context.draw();\r\n            });\r\n        }\r\n    }\r\n\r\n\twin.requestAnimationFrame = (function( win ) {\r\n\t\treturn\twin.requestAnimationFrame ||\r\n\t\t\t\twin.webkitRequestAnimationFrame ||\r\n\t\t\t\twin.mozRequestAnimationFrame ||\r\n\t\t\t\tfunction( fn ) {\r\n\r\n\t\t        \twin.setTimeout( fn, 1000 / 60 );\r\n\r\n\t\t        };\r\n\t})( win );\r\n\r\n    var Particleground = {\r\n        version: '1.0.0',\r\n        canvasSupport: canvasSupport,\r\n        util: {\r\n            pInt: pInt,\r\n            randomColor: randomColor,\r\n            createColor: createColor,\r\n            limitRandom: limitRandom,\r\n            extend: extend,\r\n            typeChecking: typeChecking,\r\n            isElem: isElem,\r\n            getCss: getCss,\r\n            offset: offset,\r\n            createCanvas: createCanvas,\r\n            pause: pause,\r\n            open: open,\r\n            resize: resize\r\n        },\r\n        inherit: {\r\n            color: function(){\r\n                this.color = createColor( this.set.color );\r\n                return this.color();\r\n            },\r\n            pause: function(){\r\n                pause( this );\r\n            },\r\n            open: function(){\r\n                open( this );\r\n            },\r\n            resize: function(){\r\n                resize( this );\r\n            },\r\n            requestAnimationFrame: function(){\r\n                !this.paused && win.requestAnimationFrame( this.draw.bind( this ) );\r\n            }\r\n        },\r\n        event: {\r\n            on: on,\r\n            off: off\r\n        },\r\n        extend: function( obj ){\r\n            return extend( obj, this.inherit ), this;\r\n        }\r\n    };\r\n\r\n    win.Particleground = Particleground;\r\n\treturn Particleground;\r\n}));\r\n\r\n/**\r\n * 规定：\r\n *  set: 参数配置\r\n *  set.color: 颜色\r\n *  set.resize: 自适应\r\n *\r\n *  c: canvas对象\r\n *  cw: canvas宽度\r\n *  ch: canvas高度\r\n *  cxt: canvas 2d 绘图环境\r\n *  container: 包裹canvas的容器\r\n *  dots: 通过arc绘制的粒子对象\r\n *  dot.x: 通过arc绘制的粒子的x值\r\n *  dot.y: 通过arc绘制的粒子的y值\r\n *  paused: 是否暂停\r\n *  draw: 绘图函数\r\n *\r\n */"],"sourceRoot":"/source/"}