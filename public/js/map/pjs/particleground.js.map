{"version":3,"sources":["pjs/particleground.js"],"names":["factory","define","amd","module","exports","pInt","s","parseInt","randomColor","random","toString","slice","limitRandom","max","min","getCss","elem","attr","win","getComputedStyle","offset","left","offsetLeft","top","offsetTop","offsetParent","typeChecking","obj","type","Object","prototype","call","extend","value","arg","arguments","target","deep","length","i","on","evtName","handler","addEventListener","off","removeEventListener","createCanvas","selector","context","canvasSupport","container","doc","querySelector","Error","c","createElement","cw","width","ch","height","cxt","getContext","paused","appendChild","pause","fn","open","draw","resize","set","oldCW","oldCH","scaleX","scaleY","dots","forEach","v","x","y","window","document","Math","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","Particleground","version","util","inherit","this","bind","event"],"mappings":"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","file":"pjs/particleground.js","sourcesContent":["/**\r\n * Particleground.js v1.0.0 (https://github.com/Barrior/Particleground.js)\r\n * Copyright 2016 Barrior <Barrior@qq.com>\r\n * Licensed under the MIT (https://opensource.org/licenses/mit-license.php)\r\n */\r\n(function ( factory ){\r\n    if ( typeof define === 'function' && define.amd ) {\r\n        // AMD. Register as an anonymous module.\r\n        define( [], factory );\r\n\r\n    } else if ( typeof module === 'object' && module.exports ) {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser\r\n        factory();\r\n    }\r\n}(function (){\r\n\t'use strict';\r\n\r\n\tvar win = window,\r\n        doc = document,\r\n\t\trandom = Math.random,\r\n        canvasSupport = !!doc.createElement('canvas').getContext;\r\n\r\n\tfunction pInt( s ){\r\n\t\treturn parseInt( s, 10 );\r\n\t}\r\n\tfunction randomColor(){\r\n\t\t//http://stackoverflow.com/questions/1484506/random-color-generator-in-javascript\r\n\t\treturn \"#\" + random().toString( 16 ).slice( -6 );\r\n\t}\r\n\tfunction limitRandom( max, min ){\r\n\t\treturn random() * (max - min) + min;\r\n\t}\r\n\tfunction getCss( elem, attr ){\r\n\t\treturn pInt( win.getComputedStyle( elem )[ attr ] );\r\n\t}\r\n    function offset( elem ){\r\n        var left = elem.offsetLeft || 0;\r\n        var top  = elem.offsetTop || 0;\r\n        while ( elem = elem.offsetParent ){\r\n            left += elem.offsetLeft;\r\n            top += elem.offsetTop;\r\n        }\r\n        return {\r\n            left: left,\r\n            top: top\r\n        };\r\n    }\r\n    function typeChecking( obj, type ){\r\n        return Object.prototype.toString.call( obj ) === type;\r\n    }\r\n    function extend(){\r\n        //站在jQuery的肩膀之上\r\n        var arg = arguments,\r\n            target = arg[0] || {},\r\n            deep = false,\r\n            length = arg.length,\r\n            i = 1,\r\n            value, attr;\r\n\r\n        if( typeof target === 'boolean' ){\r\n            deep = target;\r\n            target = arg[1] || {};\r\n            i++;\r\n        }\r\n\r\n        for( ; i < length; i++ ){\r\n            for( attr in arg[i] ){\r\n\r\n                value = arg[i][attr];\r\n\r\n                if( deep && (typeChecking( value, '[object Object]' ) ||\r\n                    typeChecking( value, '[object Array]' )) ){\r\n\r\n                    target[attr] =\r\n                        extend( deep, typeChecking(value, '[object Array]') ? [] : {}, value );\r\n\r\n                }else{\r\n                    target[attr] = value;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    function on( elem, evtName, handler ){\r\n        elem.addEventListener( evtName, handler );\r\n    }\r\n    function off( elem, evtName, handler ){\r\n        elem.removeEventListener( evtName, handler );\r\n    }\r\n\r\n\tfunction createCanvas( selector, context ){\r\n        if( !canvasSupport ){\r\n            return false;\r\n        }\r\n        if( typeof selector == 'object' ){\r\n            context.container = selector;\r\n        }else if( !(context.container = doc.querySelector( selector )) ){\r\n            throw new Error( selector + ' is not defined' );\r\n        }\r\n        context.c = doc.createElement( 'canvas' );\r\n\t\tcontext.cw = context.c.width = getCss( context.container, 'width' );\r\n\t\tcontext.ch = context.c.height = getCss( context.container, 'height' );\r\n\t\tcontext.cxt = context.c.getContext( '2d' );\r\n        context.paused = false;\r\n\r\n        return !!context.container.appendChild( context.c );\r\n    }\r\n\tfunction pause( context, fn ){\r\n\t\tif( canvasSupport && !context.paused ){\r\n\t\t\tcontext.paused = true;\r\n\t\t\tfn && fn.call( context );\r\n\t\t}\r\n\t}\r\n\tfunction open( context, fn ){\r\n\t\tif( canvasSupport && context.paused ){\r\n\t\t\tfn && fn.call( context );\r\n\t\t\tcontext.paused = false;\r\n\t\t\tcontext.draw();\r\n\t\t}\r\n\t}\r\n    function resize( context, fn ){\r\n        if( context.set.resize ){\r\n            on( win, 'resize', function(){\r\n                var oldCW = context.cw;\r\n                var oldCH = context.ch;\r\n\r\n                context.cw = context.c.width = getCss( context.container, 'width' );\r\n                context.ch = context.c.height = getCss( context.container, 'height' );\r\n\r\n                var scaleX = context.cw / oldCW;\r\n                var scaleY = context.ch / oldCH;\r\n\r\n                context.dots.forEach(function( v ){\r\n                    v.x *= scaleX;\r\n                    v.y *= scaleY;\r\n                });\r\n\r\n                fn && fn.call( context, scaleX, scaleY );\r\n\r\n                context.paused && context.draw();\r\n            });\r\n        }\r\n    }\r\n\r\n\twin.requestAnimationFrame = (function( win ) {\r\n\t\treturn\twin.requestAnimationFrame ||\r\n\t\t\t\twin.webkitRequestAnimationFrame ||\r\n\t\t\t\twin.mozRequestAnimationFrame ||\r\n\t\t\t\tfunction( fn ) {\r\n\r\n\t\t        \twin.setTimeout( fn, 1000 / 60 );\r\n\r\n\t\t        };\r\n\t})( win );\r\n\r\n    var Particleground = {\r\n        version: '1.0.0',\r\n        canvasSupport: canvasSupport,\r\n        util: {\r\n            pInt: pInt,\r\n            randomColor: randomColor,\r\n            limitRandom: limitRandom,\r\n            getCss: getCss,\r\n            offset: offset,\r\n            typeChecking: typeChecking,\r\n            extend: extend,\r\n            createCanvas: createCanvas,\r\n            pause: pause,\r\n            open: open,\r\n            resize: resize\r\n        },\r\n        inherit: {\r\n            pause: function(){\r\n                pause( this );\r\n            },\r\n            open: function(){\r\n                open( this );\r\n            },\r\n            resize: function(){\r\n                resize( this );\r\n            },\r\n            requestAnimationFrame: function(){\r\n                !this.paused && win.requestAnimationFrame( this.draw.bind( this ) );\r\n            }\r\n        },\r\n        event: {\r\n            on: on,\r\n            off: off\r\n        },\r\n        extend: function( obj ){\r\n            return extend( obj, this.inherit ), this;\r\n        }\r\n    };\r\n\r\n    win.Particleground = Particleground;\r\n\treturn Particleground;\r\n}));\r\n\r\n/**\r\n * 规定：\r\n *  set: 参数配置\r\n *  c: canvas对象\r\n *  cw: canvas宽度\r\n *  ch: canvas高度\r\n *  cxt: canvas 2d 绘图环境\r\n *  container: 包裹canvas的容器\r\n *  dots: 通过arc绘制的粒子对象\r\n *  dot.x: 通过arc绘制的粒子的x值\r\n *  dot.y: 通过arc绘制的粒子的y值\r\n *  paused: 是否暂停\r\n *  draw: 绘图函数\r\n *\r\n */"],"sourceRoot":"/source/"}